{"ast":null,"code":"'use strict';var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _react=_interopRequireDefault(require(\"react\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _reactNative=require(\"react-native\");var _style=_interopRequireDefault(require(\"./style\"));var _jsxRuntime=require(\"react/jsx-runtime\");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var componentIndex=0;var propTypes={data:_propTypes.default.array,onChange:_propTypes.default.func,onModalOpen:_propTypes.default.func,onModalClose:_propTypes.default.func,keyExtractor:_propTypes.default.func,labelExtractor:_propTypes.default.func,visible:_propTypes.default.bool,closeOnChange:_propTypes.default.bool,initValue:_propTypes.default.string,listType:_propTypes.default.oneOf(['SCROLLVIEW','FLATLIST']),animationType:_propTypes.default.oneOf(['none','slide','fade']),style:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),selectStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),selectTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),optionStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),optionTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),optionContainerStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),sectionStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),childrenContainerStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),touchableStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),touchableActiveOpacity:_propTypes.default.number,sectionTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),selectedItemTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),cancelContainerStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),cancelStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),cancelTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),overlayStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),initValueTextStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number]),cancelText:_propTypes.default.string,disabled:_propTypes.default.bool,supportedOrientations:_propTypes.default.arrayOf(_propTypes.default.oneOf(['portrait','portrait-upside-down','landscape','landscape-left','landscape-right'])),keyboardShouldPersistTaps:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.bool]),backdropPressToClose:_propTypes.default.bool,openButtonContainerAccessible:_propTypes.default.bool,listItemAccessible:_propTypes.default.bool,cancelButtonAccessible:_propTypes.default.bool,scrollViewAccessible:_propTypes.default.bool,scrollViewAccessibilityLabel:_propTypes.default.string,cancelButtonAccessibilityLabel:_propTypes.default.string,passThruProps:_propTypes.default.object,selectTextPassThruProps:_propTypes.default.object,optionTextPassThruProps:_propTypes.default.object,cancelTextPassThruProps:_propTypes.default.object,scrollViewPassThruProps:_propTypes.default.object,modalOpenerHitSlop:_propTypes.default.object,customSelector:_propTypes.default.node,selectedKey:_propTypes.default.any,enableShortPress:_propTypes.default.bool,enableLongPress:_propTypes.default.bool,optionsTestIDPrefix:_propTypes.default.string,header:_propTypes.default.node,onEndReached:_propTypes.default.func};var defaultProps={data:[],onChange:function onChange(){},onModalOpen:function onModalOpen(){},onModalClose:function onModalClose(){},keyExtractor:function keyExtractor(item){return item&&item.key;},labelExtractor:function labelExtractor(item){return item&&item.label;},componentExtractor:function componentExtractor(item){return item&&item.component;},listType:'SCROLLVIEW',visible:false,closeOnChange:true,initValue:'Select me!',animationType:'slide',style:{},selectStyle:{},selectTextStyle:{},optionStyle:{},optionTextStyle:{},optionContainerStyle:{},sectionStyle:{},childrenContainerStyle:{},touchableStyle:{},touchableActiveOpacity:0.2,sectionTextStyle:{},selectedItemTextStyle:{},cancelContainerStyle:{},cancelStyle:{},cancelTextStyle:{},overlayStyle:{},initValueTextStyle:{},cancelText:'cancel',disabled:false,supportedOrientations:['portrait','landscape'],keyboardShouldPersistTaps:'always',backdropPressToClose:false,openButtonContainerAccessible:false,listItemAccessible:false,cancelButtonAccessible:false,scrollViewAccessible:false,scrollViewAccessibilityLabel:\"\",cancelButtonAccessibilityLabel:\"\",passThruProps:{},selectTextPassThruProps:{},optionTextPassThruProps:{},cancelTextPassThruProps:{},scrollViewPassThruProps:{},modalOpenerHitSlop:{top:0,bottom:0,left:0,right:0},customSelector:undefined,selectedKey:'',enableShortPress:true,enableLongPress:false,optionsTestIDPrefix:'default',header:undefined,onEndReached:undefined};var ModalSelector=function(_React$Component){(0,_inherits2.default)(ModalSelector,_React$Component);var _super=_createSuper(ModalSelector);function ModalSelector(props){var _this;(0,_classCallCheck2.default)(this,ModalSelector);_this=_super.call(this,props);_this.validateSelectedKey=function(key){var selectedItem=_this.props.data.filter(function(item){return _this.props.keyExtractor(item)===key;});var selectedLabel=selectedItem.length>0?_this.props.labelExtractor(selectedItem[0]):_this.props.initValue;var selectedKey=selectedItem.length>0?key:undefined;return{label:selectedLabel,key:selectedKey};};_this.onChange=function(item){var key=_this.props.keyExtractor(item);if(!item||key==null){return;}_this.props.onChange(item);_this.setState({selected:_this.props.labelExtractor(item),changedItem:item},function(){if(_this.props.closeOnChange)_this.close(item);});};_this.close=function(item){_this.props.onModalClose(item);_this.setState({modalVisible:false});};_this.open=function(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!params.longPress&&!_this.props.enableShortPress){return;}if(params.longPress&&!_this.props.enableLongPress){return;}_this.props.onModalOpen(params);_this.setState({modalVisible:true,changedItem:undefined});};_this.renderSection=function(section){var optionComponent=_this.props.componentExtractor(section);var component=optionComponent||(0,_jsxRuntime.jsx)(_reactNative.Text,{style:[_style.default.sectionTextStyle,_this.props.sectionTextStyle],children:_this.props.labelExtractor(section)});return(0,_jsxRuntime.jsx)(_reactNative.View,{style:[_style.default.sectionStyle,_this.props.sectionStyle],children:component},_this.props.keyExtractor(section));};_this.renderOption=function(option,isLastItem,isFirstItem){var optionComponent=_this.props.componentExtractor(option);var optionLabel=_this.props.labelExtractor(option);var isSelectedItem=optionLabel===_this.state.selected;var component=optionComponent||(0,_jsxRuntime.jsx)(_reactNative.Text,Object.assign({style:[_style.default.optionTextStyle,_this.props.optionTextStyle,isSelectedItem&&_this.props.selectedItemTextStyle]},_this.props.optionTextPassThruProps,{children:optionLabel}));return(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,Object.assign({testID:option.testID||_this.props.optionsTestIDPrefix+'-'+optionLabel,onPress:function onPress(){return _this.onChange(option);},activeOpacity:_this.props.touchableActiveOpacity,accessible:_this.props.listItemAccessible,accessibilityLabel:option.accessibilityLabel||undefined,importantForAccessibility:isFirstItem?'yes':'no'},_this.props.passThruProps,{children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:[_style.default.optionStyle,_this.props.optionStyle,isLastItem&&{borderBottomWidth:0}],children:component})}),_this.props.keyExtractor(option));};_this.renderFlatlistOption=function(_ref){var item=_ref.item,index=_ref.index,separators=_ref.separators;if(item.section){return _this.renderSection(item);}var numItems=_this.props.data.length;return _this.renderOption(item,index===numItems-1,index===0);};_this.renderOptionList=function(){var _this$props=_this.props,data=_this$props.data,listType=_this$props.listType,backdropPressToClose=_this$props.backdropPressToClose,scrollViewPassThruProps=_this$props.scrollViewPassThruProps,overlayStyle=_this$props.overlayStyle,optionContainerStyle=_this$props.optionContainerStyle,keyboardShouldPersistTaps=_this$props.keyboardShouldPersistTaps,scrollViewAccessible=_this$props.scrollViewAccessible,scrollViewAccessibilityLabel=_this$props.scrollViewAccessibilityLabel,cancelContainerStyle=_this$props.cancelContainerStyle,touchableActiveOpacity=_this$props.touchableActiveOpacity,cancelButtonAccessible=_this$props.cancelButtonAccessible,cancelButtonAccessibilityLabel=_this$props.cancelButtonAccessibilityLabel,cancelStyle=_this$props.cancelStyle,cancelTextStyle=_this$props.cancelTextStyle,cancelText=_this$props.cancelText,header=_this$props.header;var options=data.map(function(item,index){if(item.section){return _this.renderSection(item);}return _this.renderOption(item,index===data.length-1,index===0);});var Overlay=_reactNative.View;var overlayProps={style:{flex:1}};if(backdropPressToClose){Overlay=_reactNative.TouchableWithoutFeedback;overlayProps={key:\"modalSelector\"+componentIndex++,accessible:false,onPress:_this.close};}var optionsContainerStyle={paddingHorizontal:10};if(scrollViewPassThruProps&&scrollViewPassThruProps.horizontal){optionsContainerStyle.flexDirection='row';}return(0,_jsxRuntime.jsx)(Overlay,Object.assign({},overlayProps,{children:(0,_jsxRuntime.jsxs)(_reactNative.View,{style:[_style.default.overlayStyle,overlayStyle],children:[(0,_jsxRuntime.jsxs)(_reactNative.View,{style:[_style.default.optionContainer,optionContainerStyle],children:[header,listType==='FLATLIST'?(0,_jsxRuntime.jsx)(_reactNative.FlatList,{data:data,keyboardShouldPersistTaps:keyboardShouldPersistTaps,accessible:scrollViewAccessible,accessibilityLabel:scrollViewAccessibilityLabel,keyExtractor:_this.props.keyExtractor,renderItem:_this.renderFlatlistOption,onEndReached:_this.props.onEndReached}):(0,_jsxRuntime.jsx)(_reactNative.ScrollView,Object.assign({keyboardShouldPersistTaps:keyboardShouldPersistTaps,accessible:scrollViewAccessible,accessibilityLabel:scrollViewAccessibilityLabel},scrollViewPassThruProps,{children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:optionsContainerStyle,children:options})}))]}),(0,_jsxRuntime.jsx)(_reactNative.View,{style:[_style.default.cancelContainer,cancelContainerStyle],children:(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,{onPress:_this.close,activeOpacity:touchableActiveOpacity,accessible:cancelButtonAccessible,accessibilityLabel:cancelButtonAccessibilityLabel,children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:[_style.default.cancelStyle,cancelStyle],children:(0,_jsxRuntime.jsx)(_reactNative.Text,Object.assign({style:[_style.default.cancelTextStyle,cancelTextStyle]},_this.props.cancelTextPassThruProps,{children:cancelText}))})})})]})}));};_this.renderChildren=function(){if(_this.props.children){return _this.props.children;}var initSelectStyle=_this.props.initValue===_this.state.selected?[_style.default.initValueTextStyle,_this.props.initValueTextStyle]:[_style.default.selectTextStyle,_this.props.selectTextStyle];return(0,_jsxRuntime.jsx)(_reactNative.View,{style:[_style.default.selectStyle,_this.props.selectStyle],children:(0,_jsxRuntime.jsx)(_reactNative.Text,Object.assign({style:initSelectStyle},_this.props.selectTextPassThruProps,{children:_this.state.selected}))});};var _selectedItem=_this.validateSelectedKey(props.selectedKey);_this.state={modalVisible:props.visible,selected:_selectedItem.label,cancelText:props.cancelText,changedItem:_selectedItem.key};return _this;}(0,_createClass2.default)(ModalSelector,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var newState={};var doUpdate=false;if(prevProps.initValue!==this.props.initValue){newState.selected=this.props.initValue;doUpdate=true;}if(prevProps.visible!==this.props.visible){newState.modalVisible=this.props.visible;doUpdate=true;}if(prevProps.selectedKey!==this.props.selectedKey||prevProps.data!==this.props.data){var selectedItem=this.validateSelectedKey(this.props.selectedKey);newState.selected=selectedItem.label;newState.changedItem=selectedItem.key;doUpdate=true;}if(doUpdate){this.setState(newState);}}},{key:\"getSelectedItem\",value:function getSelectedItem(){return this.state.changedItem;}},{key:\"render\",value:function render(){var _this2=this;var dp=(0,_jsxRuntime.jsx)(_reactNative.Modal,{transparent:true,ref:function ref(element){return _this2.model=element;},supportedOrientations:this.props.supportedOrientations,visible:this.state.modalVisible,onRequestClose:this.close,animationType:this.props.animationType,onDismiss:function onDismiss(){return _this2.state.changedItem&&_this2.props.onChange(_this2.state.changedItem);},children:this.renderOptionList()});return(0,_jsxRuntime.jsxs)(_reactNative.View,Object.assign({style:this.props.style},this.props.passThruProps,{children:[dp,this.props.customSelector?this.props.customSelector:(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,{hitSlop:this.props.modalOpenerHitSlop,activeOpacity:this.props.touchableActiveOpacity,style:this.props.touchableStyle,onPress:this.open,onLongPress:function onLongPress(){return _this2.open({longPress:true});},disabled:this.props.disabled,accessible:this.props.openButtonContainerAccessible,children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:this.props.childrenContainerStyle,pointerEvents:\"none\",children:this.renderChildren()})})]}));}}]);return ModalSelector;}(_react.default.Component);exports.default=ModalSelector;ModalSelector.propTypes=propTypes;ModalSelector.defaultProps=defaultProps;","map":{"version":3,"sources":["/Users/uheron/IH/storybookFinalTest/node_modules/react-native-modal-selector/index.js"],"names":["componentIndex","propTypes","data","PropTypes","array","onChange","func","onModalOpen","onModalClose","keyExtractor","labelExtractor","visible","bool","closeOnChange","initValue","string","listType","oneOf","animationType","style","oneOfType","object","number","selectStyle","selectTextStyle","optionStyle","optionTextStyle","optionContainerStyle","sectionStyle","childrenContainerStyle","touchableStyle","touchableActiveOpacity","sectionTextStyle","selectedItemTextStyle","cancelContainerStyle","cancelStyle","cancelTextStyle","overlayStyle","initValueTextStyle","cancelText","disabled","supportedOrientations","arrayOf","keyboardShouldPersistTaps","backdropPressToClose","openButtonContainerAccessible","listItemAccessible","cancelButtonAccessible","scrollViewAccessible","scrollViewAccessibilityLabel","cancelButtonAccessibilityLabel","passThruProps","selectTextPassThruProps","optionTextPassThruProps","cancelTextPassThruProps","scrollViewPassThruProps","modalOpenerHitSlop","customSelector","node","selectedKey","any","enableShortPress","enableLongPress","optionsTestIDPrefix","header","onEndReached","defaultProps","item","key","label","componentExtractor","component","top","bottom","left","right","undefined","ModalSelector","props","validateSelectedKey","selectedItem","filter","selectedLabel","length","setState","selected","changedItem","close","modalVisible","open","params","longPress","renderSection","section","optionComponent","styles","renderOption","option","isLastItem","isFirstItem","optionLabel","isSelectedItem","state","testID","accessibilityLabel","borderBottomWidth","renderFlatlistOption","index","separators","numItems","renderOptionList","options","map","Overlay","View","overlayProps","flex","TouchableWithoutFeedback","accessible","onPress","optionsContainerStyle","paddingHorizontal","horizontal","flexDirection","optionContainer","cancelContainer","renderChildren","children","initSelectStyle","prevProps","prevState","newState","doUpdate","dp","element","model","React","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    View,\n    Modal,\n    Text,\n    FlatList,\n    ScrollView,\n    TouchableOpacity,\n    TouchableWithoutFeedback,\n} from 'react-native';\n\nimport styles from './style';\n\nlet componentIndex = 0;\n\nconst propTypes = {\n    data:                           PropTypes.array,\n    onChange:                       PropTypes.func,\n    onModalOpen:                    PropTypes.func,\n    onModalClose:                   PropTypes.func,\n    keyExtractor:                   PropTypes.func,\n    labelExtractor:                 PropTypes.func,\n    visible:                        PropTypes.bool,\n    closeOnChange:                  PropTypes.bool,\n    initValue:                      PropTypes.string,\n    listType:                       PropTypes.oneOf(['SCROLLVIEW', 'FLATLIST']),\n    animationType:                  PropTypes.oneOf(['none', 'slide', 'fade']),\n    style:                          PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    selectStyle:                    PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    selectTextStyle:                PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    optionStyle:                    PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    optionTextStyle:                PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    optionContainerStyle:           PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    sectionStyle:                   PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    childrenContainerStyle:         PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    touchableStyle:                 PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    touchableActiveOpacity:         PropTypes.number,\n    sectionTextStyle:               PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    selectedItemTextStyle:          PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    cancelContainerStyle:           PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    cancelStyle:                    PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    cancelTextStyle:                PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    overlayStyle:                   PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    initValueTextStyle:             PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\n    cancelText:                     PropTypes.string,\n    disabled:                       PropTypes.bool,\n    supportedOrientations:          PropTypes.arrayOf(\n                                      PropTypes.oneOf([\n                                        'portrait',\n                                        'portrait-upside-down',\n                                        'landscape',\n                                        'landscape-left',\n                                        'landscape-right',\n                                      ]),\n                                    ),\n    keyboardShouldPersistTaps:      PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    backdropPressToClose:           PropTypes.bool,\n    openButtonContainerAccessible:  PropTypes.bool,\n    listItemAccessible:             PropTypes.bool,\n    cancelButtonAccessible:         PropTypes.bool,\n    scrollViewAccessible:           PropTypes.bool,\n    scrollViewAccessibilityLabel:   PropTypes.string,\n    cancelButtonAccessibilityLabel: PropTypes.string,\n    passThruProps:                  PropTypes.object,\n    selectTextPassThruProps:        PropTypes.object,\n    optionTextPassThruProps:        PropTypes.object,\n    cancelTextPassThruProps:        PropTypes.object,\n    scrollViewPassThruProps:        PropTypes.object,\n    modalOpenerHitSlop:             PropTypes.object,\n    customSelector:                 PropTypes.node,\n    selectedKey:                    PropTypes.any,\n    enableShortPress:               PropTypes.bool,\n    enableLongPress:                PropTypes.bool,\n    optionsTestIDPrefix:            PropTypes.string,\n    header:                         PropTypes.node,\n    onEndReached:                   PropTypes.func,\n};\n\nconst defaultProps = {\n    data:                           [],\n    onChange:                       () => {},\n    onModalOpen:                    () => {},\n    onModalClose:                   () => {},\n    keyExtractor:                   (item) => item && item.key,\n    labelExtractor:                 (item) => item && item.label,\n    componentExtractor:             (item) => item && item.component,\n    listType:                       'SCROLLVIEW',\n    visible:                        false,\n    closeOnChange:                  true,\n    initValue:                      'Select me!',\n    animationType:                  'slide',\n    style:                          {},\n    selectStyle:                    {},\n    selectTextStyle:                {},\n    optionStyle:                    {},\n    optionTextStyle:                {},\n    optionContainerStyle:           {},\n    sectionStyle:                   {},\n    childrenContainerStyle:         {},\n    touchableStyle:                 {},\n    touchableActiveOpacity:         0.2,\n    sectionTextStyle:               {},\n    selectedItemTextStyle:          {},\n    cancelContainerStyle:           {},\n    cancelStyle:                    {},\n    cancelTextStyle:                {},\n    overlayStyle:                   {},\n    initValueTextStyle:             {},\n    cancelText:                     'cancel',\n    disabled:                       false,\n    supportedOrientations:          ['portrait', 'landscape'],\n    keyboardShouldPersistTaps:      'always',\n    backdropPressToClose:           false,\n    openButtonContainerAccessible:  false,\n    listItemAccessible:             false,\n    cancelButtonAccessible:         false,\n    scrollViewAccessible:           false,\n    scrollViewAccessibilityLabel:   \"\",\n    cancelButtonAccessibilityLabel: \"\",\n    passThruProps:                  {},\n    selectTextPassThruProps:        {},\n    optionTextPassThruProps:        {},\n    cancelTextPassThruProps:        {},\n    scrollViewPassThruProps:        {},\n    modalOpenerHitSlop:             {top: 0, bottom: 0, left: 0, right: 0},\n    customSelector:                 undefined,\n    selectedKey:                    '',\n    enableShortPress:               true,\n    enableLongPress:                false,\n    optionsTestIDPrefix:            'default',\n    header:                         undefined,\n    onEndReached:                   undefined,\n};\n\nexport default class ModalSelector extends React.Component {\n\n    constructor(props) {\n        super(props);\n        let selectedItem = this.validateSelectedKey(props.selectedKey);\n        this.state = {\n            modalVisible:  props.visible,\n            selected:      selectedItem.label,\n            cancelText:    props.cancelText,\n            changedItem:   selectedItem.key,\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        let newState = {};\n        let doUpdate = false;\n        if (prevProps.initValue !== this.props.initValue) {\n            newState.selected = this.props.initValue;\n            doUpdate = true;\n        }\n        if (prevProps.visible !== this.props.visible) {\n            newState.modalVisible = this.props.visible;\n            doUpdate = true;\n        }\n        if (prevProps.selectedKey !== this.props.selectedKey || prevProps.data !== this.props.data) {\n            let selectedItem = this.validateSelectedKey(this.props.selectedKey);\n            newState.selected = selectedItem.label;\n            newState.changedItem = selectedItem.key;\n            doUpdate = true;\n        }\n        if (doUpdate) {\n            this.setState(newState);\n        }\n    }\n\n    validateSelectedKey = (key) => {\n        let selectedItem = this.props.data.filter((item) => this.props.keyExtractor(item) === key);\n        let selectedLabel = selectedItem.length > 0 ? this.props.labelExtractor(selectedItem[0]) : this.props.initValue;\n        let selectedKey = selectedItem.length > 0 ? key : undefined;\n        return {label: selectedLabel, key: selectedKey}\n    }\n\n    onChange = (item) => {\n        const key = this.props.keyExtractor(item);\n        if (!item || key == null) { // == coercion\n          return;\n        }\n        this.props.onChange(item);\n        this.setState({ selected: this.props.labelExtractor(item), changedItem: item }, () => {\n          if (this.props.closeOnChange)\n            this.close(item);\n        });\n    }\n\n    getSelectedItem() {\n      return this.state.changedItem;\n    }\n\n    close = (item) => {\n        this.props.onModalClose(item);\n        this.setState({\n            modalVisible: false,\n        });\n    }\n\n    open = (params = {}) => {\n        if (!params.longPress && !this.props.enableShortPress) {\n          return;\n        }\n        if (params.longPress && !this.props.enableLongPress) {\n          return;\n        }\n        this.props.onModalOpen(params);\n        this.setState({\n            modalVisible: true,\n            changedItem:  undefined,\n        });\n    }\n\n    renderSection = (section) => {\n        const optionComponent = this.props.componentExtractor(section);\n        let component = optionComponent || (\n          <Text style={[styles.sectionTextStyle,this.props.sectionTextStyle]}>{this.props.labelExtractor(section)}</Text>\n        );\n\n        return (\n            <View key={this.props.keyExtractor(section)} style={[styles.sectionStyle,this.props.sectionStyle]}>\n                {component}\n            </View>\n        );\n    }\n\n    renderOption = (option, isLastItem, isFirstItem) => {\n        const optionComponent = this.props.componentExtractor(option);\n        const optionLabel = this.props.labelExtractor(option);\n        const isSelectedItem = optionLabel === this.state.selected;\n\n        let component = optionComponent || (\n          <Text style={[styles.optionTextStyle,this.props.optionTextStyle,isSelectedItem && this.props.selectedItemTextStyle]} {...this.props.optionTextPassThruProps}>\n              {optionLabel}\n          </Text>\n        );\n\n        return (\n            <TouchableOpacity\n              key={this.props.keyExtractor(option)}\n              testID={option.testID || this.props.optionsTestIDPrefix + '-' + optionLabel}\n              onPress={() => this.onChange(option)}\n              activeOpacity={this.props.touchableActiveOpacity}\n              accessible={this.props.listItemAccessible}\n              accessibilityLabel={option.accessibilityLabel || undefined}\n              importantForAccessibility={isFirstItem ? 'yes' : 'no'}\n              {...this.props.passThruProps}\n            >\n                <View style={[styles.optionStyle, this.props.optionStyle, isLastItem && {borderBottomWidth: 0}]}>\n                  {component}\n                </View>\n            </TouchableOpacity>);\n    }\n\n    renderFlatlistOption = ({ item, index, separators }) => {\n        if (item.section) {\n            return this.renderSection(item);\n        }\n        const numItems = this.props.data.length;\n        return this.renderOption(item, index === (numItems - 1), index === 0);\n    }\n\n    renderOptionList = () => {\n        const {\n            data,\n            listType,\n            backdropPressToClose,\n            scrollViewPassThruProps,\n            overlayStyle,\n            optionContainerStyle,\n            keyboardShouldPersistTaps,\n            scrollViewAccessible,\n            scrollViewAccessibilityLabel,\n            cancelContainerStyle,\n            touchableActiveOpacity,\n            cancelButtonAccessible,\n            cancelButtonAccessibilityLabel,\n            cancelStyle,\n            cancelTextStyle,\n            cancelText,\n            header,\n        } = this.props;\n\n        let options = data.map((item, index) => {\n            if (item.section) {\n                return this.renderSection(item);\n            }\n            return this.renderOption(item, index === data.length - 1, index === 0);\n        });\n\n        let Overlay = View;\n        let overlayProps = {\n            style: {flex: 1},\n        };\n        // Some RN versions have a bug here, so making the property opt-in works around this problem\n        if (backdropPressToClose) {\n          Overlay = TouchableWithoutFeedback;\n          overlayProps = {\n              key: `modalSelector${componentIndex++}`,\n              accessible: false,\n              onPress: this.close,\n          };\n        }\n\n        const optionsContainerStyle = {paddingHorizontal: 10};\n        if (scrollViewPassThruProps && scrollViewPassThruProps.horizontal) {\n          optionsContainerStyle.flexDirection = 'row';\n        }\n\n        return (\n            <Overlay {...overlayProps}>\n                <View style={[styles.overlayStyle, overlayStyle]}>\n                    <View style={[styles.optionContainer, optionContainerStyle]}>\n                        {header}\n                        {listType === 'FLATLIST'?\n                            <FlatList\n                                data={data}\n                                keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n                                accessible={scrollViewAccessible}\n                                accessibilityLabel={scrollViewAccessibilityLabel}\n                                keyExtractor={this.props.keyExtractor}\n                                renderItem={this.renderFlatlistOption}\n                                onEndReached={this.props.onEndReached}\n                            />\n                            :\n                            <ScrollView\n                                keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n                                accessible={scrollViewAccessible}\n                                accessibilityLabel={scrollViewAccessibilityLabel}\n                                {...scrollViewPassThruProps}\n                            >\n                                <View style={optionsContainerStyle}>\n                                    {options}\n                                </View>\n                            </ScrollView>\n                        }\n                    </View>\n                    <View style={[styles.cancelContainer, cancelContainerStyle]}>\n                        <TouchableOpacity onPress={this.close} activeOpacity={touchableActiveOpacity} accessible={cancelButtonAccessible} accessibilityLabel={cancelButtonAccessibilityLabel}>\n                            <View style={[styles.cancelStyle, cancelStyle]}>\n                                <Text style={[styles.cancelTextStyle,cancelTextStyle]} {...this.props.cancelTextPassThruProps}>{cancelText}</Text>\n                            </View>\n                        </TouchableOpacity>\n                    </View>\n                </View>\n            </Overlay>\n        );\n    }\n\n    renderChildren = () => {\n\n        if(this.props.children) {\n            return this.props.children;\n        }\n        let initSelectStyle = this.props.initValue === this.state.selected ?\n            [styles.initValueTextStyle, this.props.initValueTextStyle] : [styles.selectTextStyle, this.props.selectTextStyle];\n        return (\n            <View style={[styles.selectStyle, this.props.selectStyle]}>\n                <Text style={initSelectStyle} {...this.props.selectTextPassThruProps}>{this.state.selected}</Text>\n            </View>\n        );\n    }\n\n    render() {\n\n        const dp = (\n            <Modal\n                transparent={true}\n                ref={element => this.model = element}\n                supportedOrientations={this.props.supportedOrientations}\n                visible={this.state.modalVisible}\n                onRequestClose={this.close}\n                animationType={this.props.animationType}\n                onDismiss={() => this.state.changedItem && this.props.onChange(this.state.changedItem)}\n            >\n                {this.renderOptionList()}\n            </Modal>\n        );\n\n        return (\n            <View style={this.props.style} {...this.props.passThruProps}>\n                {dp}\n                {this.props.customSelector ?\n                    this.props.customSelector\n                    :\n                    <TouchableOpacity\n                        hitSlop={this.props.modalOpenerHitSlop}\n                        activeOpacity={this.props.touchableActiveOpacity}\n                        style={this.props.touchableStyle}\n                        onPress={this.open}\n                        onLongPress={() => this.open({longPress: true})}\n                        disabled={this.props.disabled}\n                        accessible={this.props.openButtonContainerAccessible}\n                    >\n                        <View style={this.props.childrenContainerStyle} pointerEvents=\"none\">\n                            {this.renderChildren()}\n                        </View>\n                    </TouchableOpacity>\n                }\n            </View>\n        );\n    }\n}\n\nModalSelector.propTypes = propTypes;\nModalSelector.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"script"}